(()=>{"use strict";const e=document.querySelector(".projectSection"),t=document.querySelector(".projects");function o(){const e=document.querySelectorAll(".ellipsis");let t=!1;e.forEach((e=>{e.addEventListener("click",(e=>{let o=e.target.id.length-1;const i=document.querySelector(`.projectCard.no${e.target.id.slice(o)}`);if(e.stopImmediatePropagation(),!1===i.contains(document.querySelector(`.popupMenu${e.target.id.slice(o)}`))){const l=document.createElement("div");l.classList.add(`popupMenu${e.target.id.slice(o)}`);const r=document.createElement("div");r.classList.add("popupDelete"),r.setAttribute("id",`del${e.target.id.slice(o)}`),r.textContent="Delete",l.appendChild(r);const s=document.createElement("div");s.classList.add("popupEdit"),s.textContent="Edit",s.setAttribute("id",`edit${e.target.id.slice(o)}`),l.appendChild(s),i.appendChild(l),t=!0,document.querySelectorAll(".popupDelete").forEach((e=>{e.addEventListener("click",(e=>{let t=e.target.id.length-1;document.querySelectorAll(`.no${e.target.id.slice(t)}`).forEach((e=>{e.remove()}))}))})),n=e.target.id.slice(o),document.querySelectorAll(".popupEdit").forEach((e=>{e.addEventListener("click",(e=>{let t=e.target.id.length-1;const o=document.querySelector(`.projectCard.no${e.target.id.slice(t)}`);e.stopImmediatePropagation(),document.querySelector(`.popupMenu${n}`).classList.add("hidden"),o.classList.add("editMode"),function(e){const t=document.querySelector(`.projectCard.no${e}`);if(!1===t.contains(document.querySelector(`.editForm.no${e}`))){t.classList.add("editMode");let o=d[e-1];const i=document.createElement("form");i.setAttribute("method","get"),i.classList.add("editForm"),i.classList.add(`no${e}`);for(let t in o)if("priority"===t){let t=document.createElement("select");t.setAttribute("name","priority"),t.setAttribute("id","priority"),t.setAttribute("class",`no${e}`),i.appendChild(t);let o=document.createElement("option");o.setAttribute("value","low"),o.textContent="Low",t.appendChild(o);let d=document.createElement("option");d.setAttribute("value","medium"),d.textContent="Medium",t.appendChild(d);let c=document.createElement("option");c.setAttribute("value","high"),c.textContent="High",t.appendChild(c)}else if("dueDate"===t){let o=document.createElement("label");o.setAttribute("for",t),o.textContent=t,i.appendChild(o);let d=document.createElement("input");d.setAttribute("type","date"),d.setAttribute("name",t),d.setAttribute("id",t),d.setAttribute("class",`no${e}`),i.appendChild(d)}else if("title"===t){let o=document.createElement("label");o.setAttribute("for",t),o.textContent=t,i.appendChild(o);let d=document.createElement("input");d.setAttribute("type","text"),d.setAttribute("id","projectTitle"),d.setAttribute("class",`no${e}`),d.setAttribute("name",t),i.appendChild(d)}else{let o=document.createElement("label");o.setAttribute("for",t),o.textContent=t,i.appendChild(o);let d=document.createElement("input");d.setAttribute("type","text"),d.setAttribute("name",t),d.setAttribute("id",t),d.setAttribute("class",`no${e}`),i.appendChild(d)}let n=document.createElement("button");n.setAttribute("class","submitProject"),n.setAttribute("id",`no${e}`),n.textContent="Done",n.addEventListener("click",(o=>{o.preventDefault();const n=document.querySelector(`#projectTitle.no${e}`).value,l=document.querySelector(`#description.no${e}`).value,r=document.querySelector(`#dueDate.no${e}`).value,s=document.querySelector(`#priority.no${e}`).value;let a=new c(n,l,r,s);d[e-1]=a,i.classList.add("hidden"),t.classList.remove("editMode"),function(e){const t=document.querySelector(`.projectCard.no${e}`);t.querySelector(".projectdescription").classList.toggle("hidden"),t.querySelector(".projecttitle").classList.remove("hidden"),t.querySelector(".projectdueDate").classList.remove("hidden"),t.querySelector(".ellipsis").classList.remove("hidden")}(e);let u=document.querySelectorAll(`.no${e}`);for(let e=0;e<u.length;e++)u[e].classList.contains("projecttitle")?u[e].textContent=n:u[e].classList.contains("projectdescription")?(u[e].textContent=l,u[e].classList.add("hidden")):u[e].classList.contains("projectdueDate")?u[e].textContent=r:u[e].classList.contains("projectpriority")&&(u[e].classList.remove("low"),u[e].classList.remove("medium"),u[e].classList.remove("high"),u[e].classList.add(s))})),i.appendChild(n),t.appendChild(i)}else t.contains(document.querySelector(`.editForm.no${e}`))&&(document.querySelector(`.editForm.no${e}`).classList.remove("hidden"),t.classList.add("editMode"))}(e.target.id.slice(t)),function(e){const t=document.querySelector(`.projectCard.no${e}`);t.querySelector(".projectdescription").classList.add("hidden"),t.querySelector(".projecttitle").classList.add("hidden"),t.querySelector(".projectdueDate").classList.add("hidden"),t.querySelector(".ellipsis").classList.add("hidden")}(n)}))}))}else!0===t||i.classList.contains(".editMode")?(document.querySelector(`.popupMenu${e.target.id.slice(o)}`).classList.add("hidden"),t=!1):!1===t&&i.contains(document.querySelector(`.popupMenu${e.target.id.slice(o)}`))&&(document.querySelector(`.popupMenu${e.target.id.slice(o)}`).classList.remove("hidden"),t=!0);var n}))}))}const i=document.querySelector(".projectForm");let d=[];function c(e,t,o,i){this.title=e,this.description=t,this.dueDate=o,this.priority=i}document.querySelector("#submitProject").addEventListener("click",(n=>{n.preventDefault(),function(){let e=new c(document.querySelector("#projectTitle.main").value,document.querySelector("#description.main").value,document.querySelector("#dueDate.main").value,document.querySelector("#priority.main").value);d.push(e)}(),i.classList.add("hidden"),document.querySelectorAll("input").forEach((e=>e.value="")),document.querySelector("#priority").value="low",function(t){for(let o=t.length-1;o<t.length;o++){let i=t[o],d=document.createElement("div");d.classList.add("projectCard"),d.classList.add(`no${[o+1]}`),e.appendChild(d);const c=document.querySelector(".no"+[o+1]);for(let e in i){let t=document.createElement("div");t.classList.add(`project${e}`),c.appendChild(t),"priority"===e?(t.classList.add(`${i[e]}`),t.textContent=""):"description"===e?(t.classList.add("hidden"),t.textContent+=i[e]):t.textContent+=i[e],t.classList.add(`no${[o+1]}`)}let n=document.createElement("img");n.classList.add("ellipsis"),n.setAttribute("id",`e${[o+1]}`),n.src="ellipsis.svg",c.appendChild(n)}}(d),function(e){for(let o=e.length-1;o<e.length;o++){let i=e[o],d=document.createElement("div");d.classList.add("projectTab"),d.classList.add(`no${[o+1]}`),t.appendChild(d);const c=document.querySelector(".no"+[o+1]);for(let e in i)if("title"===e){let t=document.createElement("div");t.classList.add(`tab${e}`),t.classList.add(`project${e}`),t.classList.add(`no${[o+1]}`),t.textContent=i[e],c.appendChild(t)}let n=document.createElement("img");n.classList.add("sidebarDelete"),n.setAttribute("id",`sidebarD${[o+1]}`),n.src="delbtn.svg",c.appendChild(n)}}(d),o(),document.querySelectorAll(".sidebarDelete").forEach((e=>{e.addEventListener("click",(e=>{let t=e.target.id.length-1;const o=document.querySelectorAll(`.no${e.target.id.slice(t)}`);e.stopImmediatePropagation(),o.forEach((e=>{e.remove()}))}))})),document.querySelectorAll(".projectCard").forEach((e=>{e.addEventListener("click",(e=>{e.stopImmediatePropagation();let t=e.target.className.length-1;if(!e.target.classList.contains("projectCard"))return;const o=document.querySelector(`.projectCard.no${e.target.className.slice(t)}`);o.classList.contains("editMode")||o.querySelector(".projectdescription").classList.toggle("hidden")}))}))})),document.querySelector(".addProject").addEventListener("click",(()=>{i.classList.remove("hidden")})),document.querySelector("#title").addEventListener("click",(()=>{console.log(d)}))})();